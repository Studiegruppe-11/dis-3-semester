<!DOCTYPE html>
<html>
<head>
  <title>Image Upload</title>
  <link rel="stylesheet" href="../styles/imageUpload.css" />

   
</head>
<body>

  <div class="container">
    <h2>Upload op til 8 billeder</h2>
    <form id="uploadForm" class="upload-form" enctype="multipart/form-data">
        <div class="file-upload-wrapper">
            <input type="file" name="image" id="fileInput" multiple style="display: none;" onchange="previewImages()">
            <button type="button" class="file-upload-button" onclick="document.getElementById('fileInput').click();">Choose Files</button>
            <span id="file-chosen">No files chosen</span>
        </div>
        <div class="preview-images" id="preview"></div>
        <div class="button-container">
            <button type="button" onclick="location.href='/admin'" class="button back-button">Back to Admin</button>
            <button type="submit" class="button">Upload Image</button>
        </div>
    </form>
    <div id="uploadStatus"></div>
</div>

  <div class="cdn-images-container">
    <h2>Nuv√¶rende billeder i CDN</h2>
    <div id="cdnImages" class="cdn-images">
      <!-- Images will be dynamically loaded here -->
    </div>
  </div>

  <script src="/scripts/upload.js"></script>
  <script>
   function previewImages() {
    var preview = document.getElementById('preview');
    var fileChosen = document.getElementById('file-chosen');
    preview.innerHTML = '';
    if (this.files) {
        fileChosen.textContent = `${this.files.length} file(s) chosen`;
        [].forEach.call(this.files, readAndPreview);
    } else {
        fileChosen.textContent = 'No files chosen';
    }

    function readAndPreview(file) {
        // Make sure `file.name` matches our extensions criteria
        if (!/\.(jpe?g|png|gif)$/i.test(file.name)) {
            return alert(file.name + " is not an image");
        } 

        var reader = new FileReader();

        reader.addEventListener("load", function() {
            var image = new Image();
            image.height = 100;
            image.title = file.name;
            image.src = this.result;
            preview.appendChild(image);
        });

        reader.readAsDataURL(file);
    }
}

document.getElementById('fileInput').addEventListener('change', previewImages);

  </script>
</body>
</html>
